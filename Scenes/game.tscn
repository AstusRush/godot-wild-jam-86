[gd_scene load_steps=11 format=4 uid="uid://c2fketo4xojpn"]

[ext_resource type="PackedScene" uid="uid://cg7pjf54rwrq1" path="res://Scenes/player.tscn" id="1_ebmjs"]
[ext_resource type="Script" uid="uid://dshkgbsarahv5" path="res://Scripts/GameCamera.gd" id="1_wowpa"]
[ext_resource type="Script" uid="uid://cgc4iakrvjk3m" path="res://Scripts/Paused.gd" id="2_qxrlw"]
[ext_resource type="Script" uid="uid://ce6p4aodr01aw" path="res://Scripts/Player.gd" id="2_wrm1d"]
[ext_resource type="Script" uid="uid://mq7doga6rtdm" path="res://Scripts/DeathScreen.gd" id="4_3dryh"]
[ext_resource type="PackedScene" uid="uid://cy8xoy4p76uee" path="res://Scenes/Enemies/civilian.tscn" id="7_1l0tm"]
[ext_resource type="Texture2D" uid="uid://bjl22uwx5f68w" path="res://Sprites/Human/Tilemap.png" id="8_v158k"]

[sub_resource type="CircleShape2D" id="CircleShape2D_1l0tm"]
radius = 66.4906

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_v158k"]
texture = ExtResource("8_v158k")
texture_region_size = Vector2i(100, 100)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-50, -50, 50, -50, 50, 50, -50, 50)

[sub_resource type="TileSet" id="TileSet_1l0tm"]
tile_size = Vector2i(100, 100)
physics_layer_0/collision_layer = 4
physics_layer_0/collision_mask = 0
sources/0 = SubResource("TileSetAtlasSource_v158k")

[node name="Game" type="Node2D"]

[node name="Camera2D" type="Camera2D" parent="."]
script = ExtResource("1_wowpa")
_mouseOffsetMod = 0.2
_swaySpeed = 12.0
_screenshakeStrength = 17
_screenshakeEase = 1
_zoomReturnSpeed = 0.3
_zoomModFullCharged = 0.9

[node name="Paused" type="Control" parent="Camera2D" node_paths=PackedStringArray("_btnContinue", "_btnRestart", "_btnReturn")]
process_mode = 3
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("2_qxrlw")
_btnContinue = NodePath("VBoxContainer/btnContinue")
_btnRestart = NodePath("VBoxContainer/btnRestart")
_btnReturn = NodePath("VBoxContainer/btnReturn")

[node name="VBoxContainer" type="VBoxContainer" parent="Camera2D/Paused"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -109.5
offset_top = -85.0
offset_right = 109.5
offset_bottom = 85.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 20

[node name="btnContinue" type="Button" parent="Camera2D/Paused/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "CONTINUE"

[node name="btnRestart" type="Button" parent="Camera2D/Paused/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "RESTART"

[node name="btnReturn" type="Button" parent="Camera2D/Paused/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "MENU"

[node name="DeathScreen" type="Control" parent="Camera2D" node_paths=PackedStringArray("_deathMessageLabel", "_statTimeAlive", "_statKillCount", "_retryPromptLabel", "_btnRetry", "_btnReturn")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_3dryh")
_deathMessageLabel = NodePath("DeathMessage")
_statTimeAlive = NodePath("VBoxStats/timeAlive")
_statKillCount = NodePath("VBoxStats/killCount")
_retryPromptLabel = NodePath("RetryPrompt")
_btnRetry = NodePath("HBoxContainer/BtnRetry")
_btnReturn = NodePath("HBoxContainer/BtnReturn")

[node name="VBoxStats" type="VBoxContainer" parent="Camera2D/DeathScreen"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -300.0
offset_top = -182.0
offset_right = 300.0
offset_bottom = 90.0
grow_horizontal = 2
grow_vertical = 2

[node name="timeAlive" type="RichTextLabel" parent="Camera2D/DeathScreen/VBoxStats"]
layout_mode = 2
size_flags_vertical = 3
theme_override_font_sizes/normal_font_size = 40
text = "TIME SURVIVED"

[node name="killCount" type="RichTextLabel" parent="Camera2D/DeathScreen/VBoxStats"]
layout_mode = 2
size_flags_vertical = 3
theme_override_font_sizes/normal_font_size = 40
text = "KILL COUNT"

[node name="DeathMessage" type="RichTextLabel" parent="Camera2D/DeathScreen"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -750.0
offset_top = -307.0
offset_right = 750.0
offset_bottom = -195.0
grow_horizontal = 2
grow_vertical = 0
theme_override_font_sizes/normal_font_size = 80
bbcode_enabled = true
text = "[center]DEAD"

[node name="RetryPrompt" type="RichTextLabel" parent="Camera2D/DeathScreen"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -750.0
offset_top = 70.0
offset_right = 750.0
offset_bottom = 182.0
grow_horizontal = 2
grow_vertical = 0
theme_override_font_sizes/normal_font_size = 70
bbcode_enabled = true
text = "[center]Again?"

[node name="HBoxContainer" type="HBoxContainer" parent="Camera2D/DeathScreen"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -200.0
offset_top = 178.0
offset_right = 200.0
offset_bottom = 303.0
grow_horizontal = 2
theme_override_constants/separation = 54

[node name="BtnRetry" type="Button" parent="Camera2D/DeathScreen/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
text = "AGAIN!"

[node name="BtnReturn" type="Button" parent="Camera2D/DeathScreen/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
text = "MENU"

[node name="Player" parent="." node_paths=PackedStringArray("attackBox", "paused") instance=ExtResource("1_ebmjs")]
collision_mask = 5
lock_rotation = true
script = ExtResource("2_wrm1d")
baseAccel = 1400.0
baseDrag = 1.5
baseDecel = 3000.0
jitterSnapThreshold = 50
maxCounterMod = 5.0
lungeSpeedMin = 1900
lungeSpeedMax = 3200
lungeDrag = 5000
lungeAccel = 400
maxLungeCounterMod = 3.5
maxLungeCharge = 0.8
attackBox = NodePath("AttackBox")
paused = NodePath("../Camera2D/Paused")

[node name="AttackBox" type="Area2D" parent="Player"]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/AttackBox"]
shape = SubResource("CircleShape2D_1l0tm")

[node name="Enemy" parent="." instance=ExtResource("7_1l0tm")]
position = Vector2(283, -19)

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAAAAMAAAAAAAAAAAD//wMAAAAAAAAAAAD+/wMAAAAAAAAAAAD9/wMAAAAAAAAAAAD8/wMAAAAAAAAAAAD7/wMAAAAAAAAAAAD7/wIAAAAAAAAAAAD6/wEAAAAAAAAAAAD6/wIAAAAAAAAAAAD6/wMAAAAAAAAAAAD6/wQAAAAAAAAAAAD6/wUAAAAAAAAAAAD7/wUAAAAAAAAAAAD8/wUAAAAAAAAAAAD9/wUAAAAAAAAAAAD9/wYAAAAAAAAAAAD+/wYAAAAAAAAAAAD//wYAAAAAAAAAAAAAAAYAAAAAAAAAAAABAAYAAAAAAAAAAAACAAYAAAAAAAAAAAADAAYAAAAAAAAAAAADAAUAAAAAAAAAAAADAAQAAAAAAAAAAAADAAMAAAAAAAAAAAACAAMAAAAAAAAAAAABAAMAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAABAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAAAAAAAAABAAQAAAAAAAAAAAD//wQAAAAAAAAAAAD+/wQAAAAAAAAAAAD9/wQAAAAAAAAAAAD8/wQAAAAAAAAAAAD7/wQAAAAAAAAAAAD//wUAAAAAAAAAAAD+/wUAAAAAAAAAAAD7//n/AAAAAAAAAAD7//r/AAAAAAAAAAD7//v/AAAAAAAAAAD7//z/AAAAAAAAAAD8//z/AAAAAAAAAAD8//v/AAAAAAAAAAD9//v/AAAAAAAAAAD+//v/AAAAAAAAAAD+//r/AAAAAAAAAAD///r/AAAAAAAAAAAAAPr/AAAAAAAAAAABAPr/AAAAAAAAAAACAPr/AAAAAAAAAAADAPr/AAAAAAAAAAAEAPr/AAAAAAAAAAAEAPn/AAAAAAAAAAADAPn/AAAAAAAAAAACAPn/AAAAAAAAAAABAPj/AAAAAAAAAAAAAPj/AAAAAAAAAAAAAPn/AAAAAAAAAAD///n/AAAAAAAAAAD+//n/AAAAAAAAAAD9//n/AAAAAAAAAAD8//n/AAAAAAAAAAD8//r/AAAAAAAAAAD9//r/AAAAAAAAAAABAPn/AAAAAAAAAAAIAPr/AAAAAAAAAAAIAPv/AAAAAAAAAAAIAPz/AAAAAAAAAAAIAP3/AAAAAAAAAAAIAP7/AAAAAAAAAAAIAP//AAAAAAAAAAAIAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAKAP//AAAAAAAAAAAKAP7/AAAAAAAAAAAKAP3/AAAAAAAAAAAKAPz/AAAAAAAAAAAKAPv/AAAAAAAAAAAKAPr/AAAAAAAAAAAJAPr/AAAAAAAAAAAJAPv/AAAAAAAAAAAJAPz/AAAAAAAAAAAJAP3/AAAAAAAAAAAJAP7/AAAAAAAAAAAJAP//AAAAAAAAAAAKAAYAAAAAAAAAAAAJAAYAAAAAAAAAAAAIAAYAAAAAAAAAAAAHAAYAAAAAAAAAAAAHAAcAAAAAAAAAAAAHAAgAAAAAAAAAAAAIAAgAAAAAAAAAAAAJAAgAAAAAAAAAAAAKAAgAAAAAAAAAAAAKAAcAAAAAAAAAAAAJAAcAAAAAAAAAAAAGAAYAAAAAAAAAAAAGAAcAAAAAAAAAAAAGAAgAAAAAAAAAAAAGAAkAAAAAAAAAAAAIAAcAAAAAAAAAAAAHAAkAAAAAAAAAAAAIAAkAAAAAAAAAAAAJAAkAAAAAAAAAAAAKAAkAAAAAAAAAAAALAAgAAAAAAAAAAAD//wkAAAAAAAAAAAD+/wkAAAAAAAAAAAD+/wgAAAAAAAAAAAD9/wgAAAAAAAAAAAD9/wcAAAAAAAAAAAD//wcAAAAAAAAAAAD//wgAAAAAAAAAAAD+/wcAAAAAAAAAAAD+/woAAAAAAAAAAAD8/wYAAAAAAAAAAAD7/wYAAAAAAAAAAAD6/wYAAAAAAAAAAAD6/wcAAAAAAAAAAAD6/wgAAAAAAAAAAAD7/wgAAAAAAAAAAAD8/wgAAAAAAAAAAAD8/wcAAAAAAAAAAAD7/wcAAAAAAAAAAAAOAA8AAAAAAAAAAAANAA8AAAAAAAAAAAAMAA8AAAAAAAAAAAALAA8AAAAAAAAAAAAKAA8AAAAAAAAAAAAJAA8AAAAAAAAAAAAIAA8AAAAAAAAAAAAHAA8AAAAAAAAAAAAGAA8AAAAAAAAAAAAFAA8AAAAAAAAAAAAEAA8AAAAAAAAAAAADAA8AAAAAAAAAAAACAA8AAAAAAAAAAAABAA8AAAAAAAAAAAAAAA8AAAAAAAAAAAD//w8AAAAAAAAAAAD+/w8AAAAAAAAAAAD9/w8AAAAAAAAAAAD8/w8AAAAAAAAAAAD7/w8AAAAAAAAAAAD6/w8AAAAAAAAAAAD5/w8AAAAAAAAAAAD4/w8AAAAAAAAAAAD3/w8AAAAAAAAAAAD2/w8AAAAAAAAAAAD1/w8AAAAAAAAAAAD0/w8AAAAAAAAAAADz/w8AAAAAAAAAAADz/w4AAAAAAAAAAADz/w0AAAAAAAAAAADz/wwAAAAAAAAAAADz/wsAAAAAAAAAAADy/woAAAAAAAAAAADy/wkAAAAAAAAAAADy/wgAAAAAAAAAAADy/wcAAAAAAAAAAADy/wYAAAAAAAAAAADy/wUAAAAAAAAAAADy/wQAAAAAAAAAAADy/wMAAAAAAAAAAADy/wIAAAAAAAAAAADy/wEAAAAAAAAAAADx/wAAAAAAAAAAAADx////AAAAAAAAAADx//7/AAAAAAAAAADx//3/AAAAAAAAAADx//z/AAAAAAAAAADx//v/AAAAAAAAAADx//r/AAAAAAAAAADx//n/AAAAAAAAAADx//j/AAAAAAAAAADx//f/AAAAAAAAAADw//b/AAAAAAAAAADw//X/AAAAAAAAAADw//T/AAAAAAAAAADw//P/AAAAAAAAAADw//L/AAAAAAAAAADx//L/AAAAAAAAAADy//L/AAAAAAAAAADz//L/AAAAAAAAAAD0//L/AAAAAAAAAAD1//L/AAAAAAAAAAD2//L/AAAAAAAAAAD3//L/AAAAAAAAAAD4//L/AAAAAAAAAAD5//L/AAAAAAAAAAD6//L/AAAAAAAAAAD7//L/AAAAAAAAAAD8//L/AAAAAAAAAAD9//L/AAAAAAAAAAD+//L/AAAAAAAAAAD///L/AAAAAAAAAAAAAPL/AAAAAAAAAAABAPL/AAAAAAAAAAACAPL/AAAAAAAAAAADAPL/AAAAAAAAAAAEAPL/AAAAAAAAAAAFAPL/AAAAAAAAAAAGAPL/AAAAAAAAAAAHAPL/AAAAAAAAAAAIAPL/AAAAAAAAAAAJAPL/AAAAAAAAAAAKAPL/AAAAAAAAAAALAPL/AAAAAAAAAAAMAPL/AAAAAAAAAAANAPL/AAAAAAAAAAAOAPL/AAAAAAAAAAAPAPL/AAAAAAAAAAAQAPL/AAAAAAAAAAAQAPP/AAAAAAAAAAAQAPT/AAAAAAAAAAAQAPX/AAAAAAAAAAAQAPb/AAAAAAAAAAAQAPf/AAAAAAAAAAAQAPj/AAAAAAAAAAAQAPn/AAAAAAAAAAAPAPr/AAAAAAAAAAAPAPv/AAAAAAAAAAAPAPz/AAAAAAAAAAAPAP3/AAAAAAAAAAAPAP7/AAAAAAAAAAAPAP//AAAAAAAAAAAPAAAAAAAAAAAAAAAPAAEAAAAAAAAAAAAPAAIAAAAAAAAAAAAPAAMAAAAAAAAAAAAPAAQAAAAAAAAAAAAPAAUAAAAAAAAAAAAPAAYAAAAAAAAAAAAPAAcAAAAAAAAAAAAOAAgAAAAAAAAAAAAOAAkAAAAAAAAAAAAOAAoAAAAAAAAAAAAOAAsAAAAAAAAAAAAOAAwAAAAAAAAAAAAOAA0AAAAAAAAAAAAOAA4AAAAAAAAAAADy//3/AAAAAAAAAADz//3/AAAAAAAAAAD0//3/AAAAAAAAAAD1//3/AAAAAAAAAAD1//7/AAAAAAAAAAD1////AAAAAAAAAAD1/wAAAAAAAAAAAAD1/wEAAAAAAAAAAAD1/wIAAAAAAAAAAAD0/wIAAAAAAAAAAADz/wIAAAAAAAAAAAD0/wAAAAAAAAAAAAD0////AAAAAAAAAAD0//7/AAAAAAAAAADz//7/AAAAAAAAAADy//7/AAAAAAAAAADy////AAAAAAAAAADy/wAAAAAAAAAAAADz/wAAAAAAAAAAAADz////AAAAAAAAAADz/wEAAAAAAAAAAAD0/wEAAAAAAAAAAAAFAPP/AAAAAAAAAAAFAPT/AAAAAAAAAAAFAPX/AAAAAAAAAAAGAPX/AAAAAAAAAAAHAPX/AAAAAAAAAAAIAPX/AAAAAAAAAAAJAPX/AAAAAAAAAAAKAPX/AAAAAAAAAAALAPX/AAAAAAAAAAAMAPX/AAAAAAAAAAAMAPT/AAAAAAAAAAAMAPP/AAAAAAAAAAALAPP/AAAAAAAAAAAKAPP/AAAAAAAAAAAJAPP/AAAAAAAAAAAKAPT/AAAAAAAAAAALAPT/AAAAAAAAAAAJAPT/AAAAAAAAAAAIAPT/AAAAAAAAAAAHAPT/AAAAAAAAAAAIAPP/AAAAAAAAAAAHAPP/AAAAAAAAAAAGAPP/AAAAAAAAAAAGAPT/AAAAAAAAAAA=")
tile_set = SubResource("TileSet_1l0tm")
physics_quadrant_size = 100
